const appMarkup = "\n\n    <div class=\"w-full max-w-lg bg-white rounded-3xl shadow-2xl overflow-hidden min-h-[700px] flex flex-col relative transition-all duration-500\" id=\"main-card\">\n        \n        <!-- Progress Bar -->\n        <div class=\"h-2 bg-gray-100 w-full relative\">\n            <div id=\"progress-bar\" class=\"h-full bg-slate-600 transition-all duration-500 ease-out w-0\"></div>\n        </div>\n\n        <!-- Navigation Controls -->\n        <div id=\"nav-controls\" class=\"absolute top-4 left-4 z-10 hidden\">\n            <button onclick=\"goBack()\" class=\"flex items-center text-gray-400 hover:text-gray-600 transition text-sm font-bold\">\n                <span class=\"text-lg ml-1\">➔</span> חזור\n            </button>\n        </div>\n        \n        <!-- User Profile Indicator -->\n        <div id=\"user-indicator\" class=\"absolute top-4 right-4 z-10 hidden flex flex-col items-end\">\n             <div class=\"text-xs text-gray-400\">שלום, <span id=\"display-username\" class=\"font-bold\"></span></div>\n             <button onclick=\"handleLogout()\" class=\"text-[10px] text-red-300 hover:text-red-500 underline mt-1\">התנתק / החלף משתמש</button>\n        </div>\n\n        <div class=\"p-8 flex-grow flex flex-col justify-center\">\n\n            <!-- Loading Screen -->\n            <div id=\"screen-loading\" class=\"screen text-center\">\n                <div class=\"loader\"></div>\n                <p class=\"mt-4 text-gray-500\">טוען נתונים...</p>\n            </div>\n\n            <!-- Login / Name Screen -->\n            <div id=\"screen-login\" class=\"screen hidden text-center\">\n                <div class=\"text-6xl mb-4\">👋</div>\n                <h1 class=\"text-3xl font-bold text-gray-800 mb-2\">ברוכים הבאים</h1>\n                <p class=\"text-gray-600 mb-8\">הזן את שמך כדי ליצור פרופיל או להתחבר</p>\n                <input type=\"text\" id=\"username-input\" placeholder=\"השם שלך\" class=\"w-full p-4 border rounded-xl mb-4 text-center text-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <button onclick=\"handleLogin()\" class=\"w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 transition shadow-lg\">\n                    צור פרופיל חדש 🚀\n                </button>\n            </div>\n\n            <!-- Welcome Screen (Hub) -->\n            <div id=\"screen-welcome\" class=\"screen hidden text-center\">\n                <div class=\"text-6xl mb-4\">🧭</div>\n                <h1 class=\"text-3xl font-bold text-gray-800 mb-2\">מבוך האנרגיה</h1>\n                <h2 class=\"text-xl text-gray-500 mb-6\">מרכז הבקרה שלך</h2>\n                \n                <div class=\"bg-gray-50 p-4 rounded-xl mb-6 border border-gray-100 text-right\">\n                    <p class=\"text-sm text-gray-500\">פרופיל בסיס:</p>\n                    <h3 class=\"text-xl font-bold text-slate-800 flex items-center gap-2\">\n                        <span id=\"hub-animal-icon\"></span> <span id=\"hub-animal-name\"></span>\n                    </h3>\n                </div>\n\n                <div class=\"space-y-4\">\n                    <button onclick=\"startQuiz('now')\" class=\"w-full bg-slate-700 text-white font-bold py-4 px-6 rounded-xl hover:bg-slate-800 transition shadow-lg flex items-center justify-between group\">\n                        <span class=\"text-right\">\n                            <div class=\"text-lg\">מה המצב עכשיו?</div>\n                            <div class=\"text-xs font-normal opacity-80\">בדיקה יומית לבניית לו\"ז אופטימלי</div>\n                        </span>\n                        <span class=\"text-2xl group-hover:scale-110 transition\">⚡</span>\n                    </button>\n\n                    <div class=\"grid grid-cols-2 gap-3 mt-4\">\n                         <div class=\"bg-indigo-50 p-3 rounded-lg text-center\">\n                             <div class=\"text-2xl font-bold text-indigo-600\" id=\"stat-tasks-count\">0</div>\n                             <div class=\"text-xs text-gray-500\">משימות פתוחות</div>\n                         </div>\n                         <div class=\"bg-teal-50 p-3 rounded-lg text-center\">\n                             <div class=\"text-2xl font-bold text-teal-600\" id=\"stat-tasks-done\">0</div>\n                             <div class=\"text-xs text-gray-500\">הושלמו</div>\n                         </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Pre-Quiz Intro (New Users) -->\n            <div id=\"screen-intro-quiz\" class=\"screen hidden text-center\">\n                <div class=\"text-6xl mb-4\">🧬</div>\n                <h1 class=\"text-2xl font-bold text-gray-800 mb-4\">נעים להכיר, <span id=\"intro-name\"></span>!</h1>\n                <p class=\"text-gray-600 mb-8 leading-relaxed\">\n                    כדי שנוכל לעזור לך לנהל את הזמן, אנחנו צריכים להבין קודם כל מי את/ה.\n                    <br><br>\n                    נצא ל\"אבחון בסיס\" קצר (3 שאלות) שיגלה לנו את ה\"חיה\" הפנימית שלך.\n                </p>\n                <button onclick=\"startQuiz('base')\" class=\"w-full bg-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:bg-indigo-700 transition shadow-lg\">\n                    התחל אבחון בסיס\n                </button>\n            </div>\n\n            <!-- Quiz Questions (Base Type) -->\n            <!-- Q1 -->\n            <div id=\"screen-q1\" class=\"screen hidden\">\n                <span class=\"text-sm font-bold text-gray-400 uppercase tracking-wider\">שאלה 1 מתוך 3</span>\n                <h3 class=\"text-2xl font-bold text-gray-800 mt-2 mb-6\">בחופש מוחלט, מתי תתעורר/י?</h3>\n                <div class=\"space-y-3\">\n                    <button onclick=\"answer('lion')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-orange-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>לפני 06:30 בבוקר</span> <span class=\"text-2xl\">🌅</span>\n                    </button>\n                    <button onclick=\"answer('bear')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-amber-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>בין 07:00 ל-09:00</span> <span class=\"text-2xl\">☀️</span>\n                    </button>\n                    <button onclick=\"answer('wolf')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-indigo-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>אחרי 10:00 או בצהריים</span> <span class=\"text-2xl\">🌙</span>\n                    </button>\n                    <button onclick=\"answer('dolphin')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-blue-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>שינה קלה / נדודי שינה</span> <span class=\"text-2xl\">👀</span>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Q2 -->\n            <div id=\"screen-q2\" class=\"screen hidden\">\n                <span class=\"text-sm font-bold text-gray-400 uppercase tracking-wider\">שאלה 2 מתוך 3</span>\n                <h3 class=\"text-2xl font-bold text-gray-800 mt-2 mb-6\">מתי הריכוז שלך בשיא?</h3>\n                <div class=\"space-y-3\">\n                    <button onclick=\"answer('lion')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-orange-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>מוקדם בבוקר</span> <span class=\"text-2xl\">🦁</span>\n                    </button>\n                    <button onclick=\"answer('bear')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-amber-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>בוקר מאוחר עד צהריים</span> <span class=\"text-2xl\">🐻</span>\n                    </button>\n                    <button onclick=\"answer('wolf')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-indigo-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>ערב או לילה</span> <span class=\"text-2xl\">🐺</span>\n                    </button>\n                    <button onclick=\"answer('dolphin')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-blue-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>משתנה / פרצי אנרגיה</span> <span class=\"text-2xl\">🐬</span>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Q3 -->\n            <div id=\"screen-q3\" class=\"screen hidden\">\n                <span class=\"text-sm font-bold text-gray-400 uppercase tracking-wider\">שאלה 3 מתוך 3</span>\n                <h3 class=\"text-2xl font-bold text-gray-800 mt-2 mb-6\">בילויים עד מאוחר?</h3>\n                <div class=\"space-y-3\">\n                    <button onclick=\"answer('lion')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-orange-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>עייף/ה ב-21:00</span> <span class=\"text-2xl\">😴</span>\n                    </button>\n                    <button onclick=\"answer('bear')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-amber-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>סבבה, אבל בחצות לישון</span> <span class=\"text-2xl\">😌</span>\n                    </button>\n                    <button onclick=\"answer('wolf')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-indigo-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>רק ב-22:00 אני מתעורר/ת!</span> <span class=\"text-2xl\">🔥</span>\n                    </button>\n                    <button onclick=\"answer('dolphin')\" class=\"btn-option w-full text-right bg-gray-50 hover:bg-blue-50 p-4 rounded-xl border border-gray-200 flex items-center justify-between group\">\n                        <span>מלחיץ / מעייף נפשית</span> <span class=\"text-2xl\">🤯</span>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Status Check Screen -->\n            <div id=\"screen-status\" class=\"screen hidden\">\n                <div class=\"flex items-center gap-2 mb-4\">\n                     <span class=\"text-2xl\">⚡</span>\n                     <h3 class=\"text-xl font-bold text-gray-800\">איך את/ה מרגיש/ה כרגע?</h3>\n                </div>\n                <div class=\"grid grid-cols-1 gap-3\">\n                    <button onclick=\"showStatusResult('lion')\" class=\"text-right p-4 rounded-xl border-2 border-orange-100 hover:border-orange-300 hover:bg-orange-50 transition bg-white\">\n                        <div class=\"font-bold text-orange-800\">חד, ממוקד וחזק</div>\n                        <div class=\"text-sm text-gray-600\">שיא האנרגיה - זה הזמן לטרוף</div>\n                    </button>\n                    <button onclick=\"showStatusResult('bear')\" class=\"text-right p-4 rounded-xl border-2 border-amber-100 hover:border-amber-300 hover:bg-amber-50 transition bg-white\">\n                        <div class=\"font-bold text-amber-800\">יציב וחברותי</div>\n                        <div class=\"text-sm text-gray-600\">אנרגיה טובה ומאוזנת</div>\n                    </button>\n                    <button onclick=\"showStatusResult('wolf')\" class=\"text-right p-4 rounded-xl border-2 border-indigo-100 hover:border-indigo-300 hover:bg-indigo-50 transition bg-white\">\n                        <div class=\"font-bold text-indigo-800\">יצירתי אך מעורפל</div>\n                        <div class=\"text-sm text-gray-600\">ראש פתוח, פחות פוקוס על פרטים</div>\n                    </button>\n                    <button onclick=\"showStatusResult('dolphin')\" class=\"text-right p-4 rounded-xl border-2 border-blue-100 hover:border-blue-300 hover:bg-blue-50 transition bg-white\">\n                        <div class=\"font-bold text-blue-800\">לחוץ / עייף / מוצף</div>\n                        <div class=\"text-sm text-gray-600\">זקוק להפסקה או ארגון מחדש</div>\n                    </button>\n                </div>\n                 <button onclick=\"goHome()\" class=\"mt-6 text-gray-400 hover:text-gray-600 text-sm w-full text-center\">ביטול וחזרה למסך הראשי</button>\n            </div>\n\n            <!-- Result & Planner Screen -->\n            <div id=\"screen-result\" class=\"screen hidden text-center\">\n                <div class=\"flex justify-between items-start\">\n                    <div id=\"result-icon\" class=\"text-5xl mb-2 animate-bounce\"></div>\n                    <div class=\"text-left\">\n                        <button onclick=\"loadLastPlan()\" class=\"text-xs bg-white/20 hover:bg-white/30 px-2 py-1 rounded text-white border border-white/40\">📂 טען תוכנית אחרונה</button>\n                    </div>\n                </div>\n                \n                <h2 class=\"text-2xl font-bold mb-1 text-white\"><span id=\"result-title\"></span></h2>\n                <p id=\"result-power\" class=\"text-sm text-white/90 mb-4 bg-black/10 p-2 rounded-lg\"></p>\n\n                <!-- Tasks & AI Section -->\n                <div class=\"bg-white/95 rounded-t-2xl p-4 shadow-xl min-h-[400px] text-gray-800 text-right\">\n                    \n                    <!-- Task List Header -->\n                    <div class=\"flex justify-between items-center mb-3\">\n                        <h3 class=\"font-bold text-gray-700\">📋 משימות לביצוע</h3>\n                        <button onclick=\"toggleAddTask()\" class=\"text-indigo-600 hover:text-indigo-800 text-sm font-bold\">+ הוסף</button>\n                    </div>\n\n                    <!-- Add Task Form (Toggle) -->\n                    <div id=\"add-task-form\" class=\"hidden bg-indigo-50 p-3 rounded-lg mb-4 border border-indigo-100\">\n                        <input type=\"text\" id=\"new-task-desc\" placeholder=\"מה המשימה?\" class=\"w-full p-2 text-sm border rounded-lg mb-2\">\n                        \n                        <div class=\"flex gap-2 mb-2\">\n                            <select id=\"new-task-type\" class=\"p-2 text-sm border rounded-lg bg-white flex-1\">\n                                <option value=\"short\">קצר (היום/מחר)</option>\n                                <option value=\"long\">ארוך (פרויקט)</option>\n                            </select>\n                            <input type=\"text\" id=\"new-task-duration\" placeholder=\"משך (למשל: שעתיים)\" class=\"w-full p-2 text-sm border rounded-lg flex-1\">\n                        </div>\n                        \n                        <div class=\"flex items-center gap-2 mb-2\">\n                            <input type=\"checkbox\" id=\"new-task-recurring\" class=\"w-4 h-4 text-indigo-600 rounded\">\n                            <label for=\"new-task-recurring\" class=\"text-sm text-gray-600\">משימה חוזרת (הרגל)</label>\n                        </div>\n\n                        <button onclick=\"addTask()\" class=\"w-full bg-indigo-600 text-white text-sm py-2 rounded-lg font-bold hover:bg-indigo-700\">שמור משימה</button>\n                    </div>\n\n                    <!-- Task List Container -->\n                    <div id=\"tasks-container\" class=\"space-y-2 mb-4 max-h-48 overflow-y-auto task-scroll p-1 border rounded bg-gray-50 min-h-[60px]\">\n                         <p id=\"empty-task-msg\" class=\"text-xs text-gray-400 text-center py-4\">אין משימות. הוסף משימה חדשה!</p>\n                    </div>\n\n                    <!-- AI Generators -->\n                    <div class=\"border-t pt-4\">\n                        <h3 class=\"font-bold text-gray-700 mb-2\">✨ יצירת לו\"ז חכם</h3>\n                        <div class=\"grid grid-cols-3 gap-2 mb-2\">\n                            <button onclick=\"generateSchedule('today')\" id=\"btn-gen-today\" class=\"bg-orange-100 text-orange-700 hover:bg-orange-200 py-2 rounded-lg text-xs font-bold border border-orange-200\">\n                                היום 🌙\n                            </button>\n                            <button onclick=\"generateSchedule('tomorrow')\" id=\"btn-gen-tomorrow\" class=\"bg-teal-100 text-teal-700 hover:bg-teal-200 py-2 rounded-lg text-xs font-bold border border-teal-200\">\n                                מחר ☀️\n                            </button>\n                            <button onclick=\"generateSchedule('week')\" id=\"btn-gen-week\" class=\"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 py-2 rounded-lg text-xs font-bold border border-indigo-200\">\n                                שבוע 📅\n                            </button>\n                        </div>\n                    </div>\n\n                    <!-- AI Result Display -->\n                    <div id=\"ai-response-container\" class=\"hidden mt-4 bg-gray-50 p-4 rounded-xl border border-gray-200 text-right\">\n                        <div class=\"flex justify-between items-center mb-2 border-b pb-2\">\n                             <span class=\"font-bold text-indigo-600 text-sm\">התוכנית שלך:</span>\n                             <div class=\"flex gap-2\">\n                                <button onclick=\"saveCurrentPlan()\" class=\"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600\">שמור 💾</button>\n                                <button onclick=\"closeAIResult()\" class=\"text-gray-400 hover:text-gray-600\">✕</button>\n                             </div>\n                        </div>\n                        <div id=\"ai-response-text\" class=\"prose text-sm leading-relaxed max-h-60 overflow-y-auto task-scroll\"></div>\n                    </div>\n                </div>\n\n                <div class=\"mt-4\">\n                    <button onclick=\"goHome()\" class=\"bg-black/20 hover:bg-black/30 text-white font-bold py-2 px-6 rounded-xl transition text-sm\">\n                        חזרה למסך הראשי 🏠\n                    </button>\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    ";

export default appMarkup;
